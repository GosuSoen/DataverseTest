@model DataverseTest.ViewModels.ContactViewModel

@{ViewData["Title"] = "Edit";}

<h3>Edit Contact</h3>

<form asp-controller="Home" asp-action="Edit" class="editForm" method="post">
    <div class="form-group">
        <label asp-for="Contact.Name"></label>
        <input type="text" class="form-control" asp-for="Contact.Name" />
        <span asp-validation-for="Contact.Name" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Contact.Email"></label>
        <input type="text" class="form-control" asp-for="Contact.Email" />
        <span asp-validation-for="Contact.Email" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Contact.Address"></label>
        <input type="text" class="form-control" asp-for="Contact.Address" />
        <span asp-validation-for="Contact.Address"></span>
    </div>
    <input type="submit" class="btn btn-warning" value="Edit Contact" />
</form>

<form asp-controller="Home" asp-action="AddContactPhone" class="form-group" method="post">
    <div class="form-group">
        <label asp-for="PhoneNumber"></label>
        <input type="text" class="form-control" placeholder="Enter Value" asp-for="PhoneNumber" />
    </div>
    <input type="hidden" asp-for="Contact.Id" />

    <input type="submit" class="btn btn-success" value="Add Phone Number" />
</form>

<div class="form-group">
    <div class="form-inline">Contact Phone Numbers</div>
    <table id="phonesTable" class="stripe">
        <thead>
            <tr>
                <th>Phone Number</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Contact.ContactPhones)
            {
                <tr>
                    <td>@item.PhoneNumber</td>
                    <td>
                        <form asp-controller="Home" id="deletePhone" asp-action="DeleteContactPhone" method="post">
                            <button type="submit" class="btn btn-danger">Delete</button>
                            <input type="hidden" name="contactId" value="@Model.Contact.Id" />
                            <input type="hidden" name="phoneId" value="@item.Id" />
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

